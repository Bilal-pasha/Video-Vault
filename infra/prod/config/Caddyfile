{
    email admin@example.com
}

:80 {
    # =========================
    # API Routes â†’ Backend
    # =========================
    handle /v1/api/* {
        reverse_proxy server:8000 {
            health_uri /health
            health_interval 30s
            health_timeout 10s
        }
    }

    handle /health {
        reverse_proxy server:8000
    }

    handle /api* {
        reverse_proxy server:8000
    }

    # =========================
    # Fallback
    # =========================
    handle {
        respond "Not Found" 404
    }

    encode gzip zstd

    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }

    log {
        output file /var/log/caddy/backend.log
        format json
    }
}
