# Development Dockerfile
FROM node:20-alpine

WORKDIR /app

# Install wget for healthcheck
RUN apk add --no-cache wget

# Set memory limit
ENV NODE_OPTIONS=--max_old_space_size=4096

# Copy package files and install dependencies
COPY package*.json ./

RUN npm install

# Copy app source and entrypoint script
COPY . .

COPY entrypoint.sh ./

# Make sure entrypoint is executable
RUN chmod +x ./entrypoint.sh

# Default command (can be overridden in docker-compose)
CMD ["bash", "./entrypoint.sh"]

